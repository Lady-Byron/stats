(()=>{var t={n:a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return t.d(e,{a:e}),e},d:(a,e)=>{for(var s in e)t.o(e,s)&&!t.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:e[s]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a)};(()=>{"use strict";const a=flarum.core.compat["common/app"];t.n(a)().initializers.add("justoverclock/stats",(function(){console.log("[justoverclock/stats] Hello, forum and admin!")}));const e=flarum.core.compat["admin/app"];var s=t.n(e);function n(t,a){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,a){return t.__proto__=a,t},n(t,a)}function r(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t,n(t,a)}const o=flarum.core.compat["admin/components/ExtensionPage"];var i=t.n(o);const c=flarum.core.compat["common/Component"];var l=t.n(c);const u=flarum.core.compat["common/utils/Stream"];var p=t.n(u),d=function(t){function a(){for(var a,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(a=t.call.apply(t,[this].concat(s))||this).stat_name=p()(""),a.stat_img=p()(""),a}r(a,t);var e=a.prototype;return e.oninit=function(a){t.prototype.oninit.call(this,a)},e.view=function(t){var a=this;return m("div",{className:"add-stats-container"},m("input",{oninput:function(t){return a.stat_name(t.target.value)},name:"stat_name",value:this.stat_name(),placeholder:s().translator.trans("justoverclock-stats.admin.baseStatInputName"),className:"FormControl",type:"text"}),m("input",{oninput:function(t){return a.stat_img(t.target.value)},name:"stat_img",value:this.stat_img(),placeholder:s().translator.trans("justoverclock-stats.admin.baseStatInputImg"),className:"FormControl",type:"url"}),m("button",{disabled:""===this.stat_name()&&""===this.stat_img(),onclick:function(){a.attrs.createStat(a.stat_name(),a.stat_img()),window.location.reload()},class:"Button Button--primary"},s().translator.trans("justoverclock-stats.admin.addStatBtn")))},a}(l()),f=function(t){function a(){return t.apply(this,arguments)||this}r(a,t);var e=a.prototype;return e.oninit=function(a){t.prototype.oninit.call(this,a)},e.view=function(t){var a=this;return m("div",{className:"created-stats-wrapper"},m("h3",null,s().translator.trans("justoverclock-stats.admin.actualStatsTitle")),m("div",{className:"created-stats-container"},this.attrs.actualStats&&this.attrs.actualStats.map((function(t){return m("div",{className:"stat-container"},m("img",{src:t.attributes.img,alt:t.attributes.name}),m("div",{className:"stat-content"},m("div",null,m("strong",null,t.attributes.name)),m("div",{className:"stat-actions"},m("button",{onclick:function(){a.attrs.deleteStat(t.attributes.id),window.location.reload()},className:"Button Button--danger"},m("i",{class:"far fa-trash-alt"})))))}))))},a}(l()),h=function(t){function a(){return t.apply(this,arguments)||this}r(a,t);var e=a.prototype;return e.oninit=function(a){t.prototype.oninit.call(this,a)},e.view=function(t){return m("div",{className:"img-conf-container"},m("h3",null,"Money and Stories images:"),m("input",{name:"money_img",bidi:this.attrs.moneySetting,placeholder:s().translator.trans("justoverclock-stats.admin.moneyImgInputName"),className:"FormControl",type:"text"}),m("input",{name:"stories_img",bidi:this.attrs.storiesSetting,placeholder:s().translator.trans("justoverclock-stats.admin.storiesImgInputName"),className:"FormControl",type:"text"}),m("button",{onclick:this.attrs.onSave,className:"Button Button--primary"},"Save"))},a}(l()),v=function(t){function a(){for(var a,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(a=t.call.apply(t,[this].concat(s))||this).actualStats=[],a}r(a,t);var e=a.prototype;return e.oninit=function(a){t.prototype.oninit.call(this,a),this.actualStats=[],this.getStats()},e.content=function(t){return m("div",{class:"base-stats-admin-container"},m(d,{refetch:this.getStats.bind(this),createStat:this.createStat.bind(this)}),m(f,{actualStats:this.actualStats,deleteStat:this.deleteStat.bind(this)}),m(h,{moneySetting:this.setting("justoverclock-stats.moneyImg"),storiesSetting:this.setting("justoverclock-stats.storiesImg"),onSave:this.saveSettings.bind(this)}))},e.createStat=function(t,a){s().request({method:"POST",url:s().forum.attribute("apiUrl")+"/base-stats/create",body:{data:{attributes:{stat_name:t,stat_img:a}}}}).then((function(){s().alerts.show({type:"success"},s().translator.trans("justoverclock-stats.admin.successStatCreated"))})).catch((function(){s().alerts.show({type:"error"},s().translator.trans("justoverclock-stats.admin.failStatCreated"))}))},e.deleteStat=function(t){s().request({method:"DELETE",url:s().forum.attribute("apiUrl")+"/base-stats/delete/"+t}).then((function(){s().alerts.show({type:"success"},s().translator.trans("justoverclock-stats.admin.successStatDeleted"))})).catch((function(){s().alerts.show({type:"error"},s().translator.trans("justoverclock-stats.admin.failStatDeleted"))}))},e.getStats=function(){var t=this;s().request({method:"GET",url:s().forum.attribute("apiUrl")+"/base-stats"}).then((function(a){var e=a;t.actualStats=e.data,m.redraw()}))},a}(i());s().initializers.add("justoverclock/stats",(function(){s().extensionData.for("justoverclock-stats").registerPage(v).registerPermission({icon:"far fa-file-alt",label:s().translator.trans("justoverclock-stats.admin.permission.editStat"),permission:"editStat",allowGuest:!1},"moderate")}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map